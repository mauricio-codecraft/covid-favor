<app-header progressRate=1.0></app-header>
<ion-content class="ion-padding " style="--offset-top:0px; --offset-bottom:0px;">
  <ion-grid id="grid">
    <p class="page__title">Mural</p>
    <h4 class="page__description">Você pode escolher visualizar os pedidos de ajuda ou os favores que as pessoas estão dispostas a realizar. Você pode escoher um pedido para atender, é simples e rápido.</h4>
    <div class="page__label"></div>
    <ion-row class="ion-no-padding ">
      <ion-col (click)="switchType()" class="radio-container " size="6" tappable="">
        <img *ngIf="showOffers" src="../../assets/radio-selected.svg">
        <img *ngIf="!showOffers" src="../../assets/radio.svg">
        <p>Ofertas de Ajuda</p>
      </ion-col>
      <ion-col (click)="switchType()" class="radio-container " size="6" tappable="">
        <img *ngIf="!showOffers" src="../../assets/radio-selected.svg">
        <img *ngIf="showOffers" src="../../assets/radio.svg">
        <p>Pedidos de Ajuda</p>
      </ion-col>
    </ion-row>
    <ion-row *ngIf="showOffers">
      <!-- Minhas Ofertas -->
      <h4 class="page__description">Minhas Ofertas</h4>
      <ion-col *ngFor="let offer of myOffers" class="selectableItem" (click)="selectItem($event)" class="delivery-cart" size="12">
        <img src="../../assets/help-hand.svg">
        <div><b>{{offer.user}} - {{offer.city}} - {{offer.neighbourhood}}</b>
          <small>{{offer.description}}</small>
          <b>Contato: {{offer.phoneNumber}}</b>
        </div>
        <input type="hidden" class="itemId" name="itemId" [value]="offer.id"/>
        <input type="hidden" class="isOwner" name="isOwner" [value]="offer.isOwner"/>
        <input type="hidden" class="itemType" name="itemType" value="offer"/>
      </ion-col>
    </ion-row>
    <ion-row *ngIf="showOffers">
      <!-- Outras Ofertas -->
      <h4 class="page__description">Outras Ofertas</h4>
      <ion-col *ngFor="let offer of otherOffers" class="selectableItem" (click)="selectItem($event)" class="delivery-cart" size="12">
        <img src="../../assets/help-hand.svg">
        <div><b>{{offer.user}} - {{offer.city}} - {{offer.neighbourhood}}</b>
          <small>{{offer.description}}</small>
          <b>Contato: {{offer.phoneNumber}}</b>
        </div>
        <input type="hidden" class="itemId" name="itemId" [value]="offer.id"/>
        <input type="hidden" class="isOwner" name="isOwner" [value]="offer.isOwner"/>
        <input type="hidden" class="itemType" name="itemType" value="offer"/>
      </ion-col>
    </ion-row>   
    <ion-row *ngIf="!showOffers">
      <!-- Minhas Solicitações -->
      <h4 class="page__description">Minhas Solicitações</h4>
      <ion-col *ngFor="let request of myRequests" class="selectableItem" (click)="selectItem($event)" class="delivery-cart" size="12">
        <img src="../../assets/help-request.svg">
        <div><b>{{request.user}} - {{request.city}} - {{request.neighbourhood}}</b>
          <small>{{request.description}}</small>
          <b *ngIf="request.status == 'assigned'">Será atendido por: {{request.asignee}} - {{request.asignee?.phoneNumber}}</b>
          <b *ngIf="request.status != 'assigned'">Contato: {{request.phoneNumber}}</b>
        </div>
        <input type="hidden" class="itemId" name="itemId" [value]="request.id"/>
        <input type="hidden" class="isOwner" name="isOwner" [value]="request.isOwner"/>
        <input type="hidden" class="itemType" name="itemType" value="request"/>
        <input type="hidden" class="itemStatus" name="itemStatus" [value]="request.status"/>
      </ion-col>
    </ion-row>
    <ion-row *ngIf="!showOffers">
      <!-- Outras Solicitações -->
      <h4 class="page__description">Outras Solicitações</h4>
      <ion-col *ngFor="let request of otherRequests" class="selectableItem" (click)="selectItem($event)" class="delivery-cart" size="12">
        <img src="../../assets/help-request.svg">
        <div><b>{{request.user}} - {{request.city}} - {{request.neighbourhood}}</b>
          <small>{{request.description}}</small>
          <b *ngIf="request.status == 'assigned'">Será atendido por: {{request.asignee}} - {{request.asignee?.phoneNumber}}</b>
          <b *ngIf="request.status != 'assigned'">Contato: {{request.phoneNumber}}</b>
        </div>
        <input type="hidden" class="itemId" name="itemId" [value]="request.id"/>
        <input type="hidden" class="isOwner" name="isOwner" [value]="request.isOwner"/>
        <input type="hidden" class="itemType" name="itemType" value="request"/>
        <input type="hidden" class="itemStatus" name="itemStatus" [value]="request.status"/>
      </ion-col>
    </ion-row>
  </ion-grid>
  <ion-infinite-scroll threshold="100px" id="infinite-scroll">
    <ion-infinite-scroll-content loading-spinner="bubbles" loading-text="Buscando...">
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-content>
<app-dashboard-footer #footer (actionSelected)="onActionSelect($event)"></app-dashboard-footer>
